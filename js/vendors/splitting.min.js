((n,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()})(this,function(){var i=document,a=i.createTextNode.bind(i);function l(n,t,e){n.style.setProperty(t,e)}function f(n,t){return n.appendChild(t)}function d(n,t,e,r){var o=i.createElement("span");return t&&(o.className=t),e&&(r||o.setAttribute("data-"+t,e),o.textContent=e),n&&f(n,o)||o}function p(n,t){return n.getAttribute("data-"+t)}function h(n,t){return n&&0!=n.length?n.nodeName?[n]:[].slice.call(n[0].nodeName?n:(t||i).querySelectorAll(n)):[]}function u(n){for(var t=[];n--;)t[n]=[];return t}function m(n,t){n&&n.some(t)}function o(t){return function(n){return t[n]}}var c={};function n(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function e(n){return function t(e,n,r){var o=r.indexOf(e);if(-1==o){r.unshift(e);var i=c[e];if(!i)throw new Error("plugin not loaded: "+e);m(i.depends,function(n){t(n,e,r)})}else i=r.indexOf(n),r.splice(o,1),r.splice(i,0,e);return r}(n,0,[]).map(o(c))}function t(n){c[n.by]=n}function g(n,e,r,o,i){n.normalize();var u=[],c=document.createDocumentFragment(),s=(o&&u.push(n.previousSibling),[]);return h(n.childNodes).some(function(n){var t;n.tagName&&!n.hasChildNodes()?s.push(n):n.childNodes&&n.childNodes.length?(s.push(n),u.push.apply(u,g(n,e,r,o,i))):(t=(n=n.wholeText||"").trim()).length&&(" "===n[0]&&s.push(a("      ")),m(t.split(r),function(n,t){t&&i&&s.push(d(c,"whitespace"," ",i));t=d(c,e,n);u.push(t),s.push(t)})," "===n[n.length-1])&&s.push(a(" "))}),m(s,function(n){f(c,n)}),n.innerHTML="",f(n,c),u}var s="words",r=n(s,0,"word",function(n){return g(n,"word",/\s+/,0,1)}),v="chars",y=n(v,[s],"char",function(n,e,t){var r=[];return m(t[s],function(n,t){r.push.apply(r,g(n,"char","",e.whitespace&&t))}),r});function w(t){var a=(t=t||{}).key;return h(t.target||"[data-splitting]").map(function(u){var n,c,s=u["🍌"];return!t.force&&s||(s=u["🍌"]={el:u},n=e(n=(n=t.by||p(u,"splitting"))&&"true"!=n?n:v),c=((n,t)=>{for(var e in t)n[e]=t[e];return n})({},t),m(n,function(n){var t,e,r,o,i;n.split&&(t=n.by,r=(a?"-"+a:"")+n.key,n=n.split(u,c,s),r&&(e=u,i=(r="--"+(r=r))+"-index",m(o=n,function(n,t){Array.isArray(n)?m(n,function(n){l(n,i,t)}):l(n,i,t)}),l(e,r+"-total",o.length)),s[t]=n,u.classList.add(t))}),u.classList.add("splitting")),s})}function b(n,t,e){var t=h(t.matching||n.children,n),r={};return m(t,function(n){var t=Math.round(n[e]);(r[t]||(r[t]=[])).push(n)}),Object.keys(r).map(Number).sort(N).map(o(r))}function N(n,t){return n-t}w.html=function(n){var t=(n=n||{}).target=d();return t.innerHTML=n.content,w(n),t.outerHTML};var x=n("lines",[s],"line",function(n,t,e){return b(n,{matching:e[s]},"offsetTop")}),T=n("items",0,"item",function(n,t){return h(t.matching||n.children,n)}),L=n("rows",0,"row",function(n,t){return b(n,t,"offsetTop")}),k=n("cols",0,"col",function(n,t){return b(n,t,"offsetLeft")}),A=n("grid",["rows","cols"]),C="layout",M=n(C,0,0,function(n,t){for(var e,r=t.rows=+(t.rows||p(n,"rows")||1),o=t.columns=+(t.columns||p(n,"columns")||1),i=(t.image=t.image||p(n,"image")||n.currentSrc||n.src,t.image&&(e=h("img",n)[0],t.image=e&&(e.currentSrc||e.src)),t.image&&l(n,"background-image","url("+t.image+")"),r*o),u=[],c=d(0,"cell-grid");i--;){var s=d(c,"cell");d(s,"cell-inner"),u.push(s)}return f(n,c),u}),S=n("cellRows",[C],"row",function(n,t,e){var r=t.rows,o=u(r);return m(e[C],function(n,t,e){o[Math.floor(t/(e.length/r))].push(n)}),o}),H=n("cellColumns",[C],"col",function(n,t,e){var r=t.columns,o=u(r);return m(e[C],function(n,t){o[t%r].push(n)}),o}),O=n("cells",["cellRows","cellColumns"],"cell",function(n,t,e){return e[C]});return(w.add=t)(r),t(y),t(x),t(T),t(L),t(k),t(A),t(M),t(S),t(H),t(O),w});