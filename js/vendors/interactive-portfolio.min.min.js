$(function(){let o=document.getElementById("stickyImgContainer");if(void 0!==o&&null!=o){var t=document.querySelector(".slides").querySelectorAll(".slide"),t=Array.from(t).map(t=>({image:"",title:"title1",meta:""}));class r{constructor(t){this.data=document.querySelectorAll(".slide"),this.container=document.querySelector(".slides"),this.currentIdx=0,this.slides=document.querySelectorAll(".slide")}mount(t){t.appendChild(this.container);for(let t=0;t<this.slides.length;t++)0===t?(this.slides[t].classList.remove("next"),this.slides[t].classList.remove("prev"),this.slides[t].classList.add("show-meta"),document.querySelector(".bg-overlay").style.backgroundImage=`url("${this.slides[t].dataset.bg}")`):t<0?(this.slides[t].classList.remove("next"),this.slides[t].classList.add("prev")):(this.slides[t].classList.add("next"),this.slides[t].classList.remove("prev"))}onActiveIndexChange(s){this.currentIdx=s;for(let t=0;t<this.slides.length;t++)s===t?(this.slides[t].classList.remove("next"),this.slides[t].classList.remove("prev"),document.querySelector(".bg-overlay").style.backgroundImage=`url("${this.slides[t].dataset.bg}")`):s>t?(this.slides[t].classList.remove("next"),this.slides[t].classList.add("prev")):(this.slides[t].classList.add("next"),this.slides[t].classList.remove("prev"))}onMove(t){this.container.style.transform=`translateY(${100*t/this.slides.length}%)`}appear(){this.container.classList.add("scrolling"),o.classList.add("scrolling"),this.slides[this.currentIdx].classList.remove("show-meta")}disperse(s){this.currentIdx=s,this.slides[this.currentIdx].classList.add("show-meta"),this.container.classList.remove("scrolling"),o.classList.remove("scrolling");for(let t=0;t<this.data.length;t++)t>s?(this.slides[t].classList.add("next"),this.slides[t].classList.remove("prev")):t<s?(this.slides[t].classList.remove("next"),this.slides[t].classList.add("prev")):(this.slides[t].classList.remove("next"),this.slides[t].classList.remove("prev"))}}class l{constructor({onGrabStart:t,onGrabMove:s,onGrabEnd:e}){this.onGrabEnd=e,this.onGrabStart=t,this.onGrabMove=s,this.scroll={start:0,current:0,initial:0},this.listen("mousedown",this.onMouseDown.bind(this)),this.listen("mousemove",this.onMouseMove.bind(this)),this.listen("mouseup",this.onMouseUp.bind(this)),this.listen("touchstart",this.onMouseDown.bind(this),!0),this.listen("touchmove",this.onMouseMove.bind(this),!0),this.listen(["touchend","touchcancel"],this.onMouseUp.bind(this),!0)}listen(s,e,t){let i=this,n=t?function(t){e({y:t.targetTouches[0]?t.targetTouches[0].clientY:null})}:function(t){"mouseout"===t.type&&null!=t.relatedTarget||e({y:t.clientY})};if(Array.isArray(s))for(let t=0;t<s.length;t++)window.addEventListener(s[t],n,!1);else window.addEventListener(s,function(t){t.target.closest(".stickyImageContainer")===o?n(t):i.onMouseUp()},!1)}onMouseDown(t){this.scroll.inital=this.scroll.current,this.scroll.start=t.y,this.scroll.current=t.y,this.scroll.delta=this.scroll.current-this.scroll.start,this.onGrabStart({delta:this.scroll.delta,direction:Math.abs(this.scroll.delta),current:this.scroll.current,start:this.scroll.start})}onMouseMove(t){this.scroll.start&&(this.scroll.current=t.y,this.scroll.delta=this.scroll.current-this.scroll.start,this.onGrabMove({delta:this.scroll.delta,direction:Math.abs(this.scroll.delta),current:this.scroll.current,start:this.scroll.start}))}onMouseUp(){this.scroll.start&&(this.onGrabEnd({delta:this.scroll.delta,direction:Math.abs(this.scroll.delta),current:this.scroll.current,start:this.scroll.start}),this.scroll.start=null,this.scroll.current=null,this.scroll.delta=null)}}let s=function({from:t,to:o,restDelta:r=.01}){let l=Object.assign({},t),a=Object.keys(t),h={current:null},c=function(t,s){if(0===a.length)cancelAnimationFrame(h.current),h.current=null,s(l);else{a.slice();for(var e,i,n=a.length;0<=n;n--)i=a[n],e=l[i]+.1*(o[i]-l[i]),Math.abs(o[i]-e)<r?(l[i]=o[i],a.splice(n,1),n--):l[i]=e;t(l),h.current=requestAnimationFrame(c)}};return{start:function({update:t,complete:s}){return c=c.bind(null,t,s),h.current=requestAnimationFrame(c),{stop:function(){cancelAnimationFrame(h.current),h.current=null}}}}};function i(t,s={}){this.data=t,this.progress=0,this.direction=1,this.waveIntensity=0,this.options=s,this.index={target:0,current:0,initial:0,scrollSize:window.innerHeight/6,active:0},this.follower={x:0,y:0},this.followerSpring=null,this.slidesSpring=null,this.grab=new l({onGrabStart:this.onGrabStart.bind(this),onGrabMove:this.onGrabMove.bind(this),onGrabEnd:this.onGrabEnd.bind(this)})}function n(t,s,e){return Math.max(s,Math.min(t,e))}i.prototype.onGrabMove=function(t){this.index.target=n(this.index.initial+t.delta/this.index.scrollSize,.51-this.data.length,.49),t=n(Math.round(-this.index.target),0,this.data.length-1),this.index.active!==t&&(this.index.active=t,this.options.onActiveIndexChange)&&this.options.onActiveIndexChange(this.index.active),this.slidesPop&&this.slidesPop.stop(),this.slidesPop=s({from:{index:this.index.current},to:{index:this.index.target},restDelta:.001}).start({update:t=>{this.options.onIndexChange&&this.options.onIndexChange(t.index),this.index.current=t.index},complete:t=>{this.options.onIndexChange&&this.options.onIndexChange(t.index),this.index.current=t.index}})},i.prototype.onGrabStart=function(){this.options.onZoomOutStart&&this.options.onZoomOutStart({activeIndex:this.index.active}),this.index.initial=this.index.current},i.prototype.snapCurrentToActiveIndex=function(){this.slidesPop&&this.slidesPop.stop(),this.slidesPop=s({from:{index:this.index.current},to:{index:Math.round(this.index.target)},restDelta:.001}).start({complete:()=>{},update:t=>{this.options.onIndexChange&&this.options.onIndexChange(t.index),this.index.current=t.index}})},i.prototype.onGrabEnd=function(){this.options.onFullscreenStart&&(this.options.onFullscreenStart({activeIndex:this.index.active}),this.snapCurrentToActiveIndex())},i.prototype.onResize=function(){};let e=new r;new i(t,{onActiveIndexChange:t=>{e.onActiveIndexChange(t)},onIndexChange:t=>{e.onMove(t)},onZoomOutStart:({})=>{e.appear()},onZoomOutFinish:({})=>{},onFullscreenStart:({activeIndex:t})=>{e.disperse(t)},onFullscreenFinish:({})=>{}}),e.mount(o)}});