var Atropos=(()=>{function N(){return(N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o,a=arguments[e];for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t}).apply(this,arguments)}function S(t,e){return t.querySelector(e)}var k={alwaysActive:!1,activeOffset:50,shadowOffset:50,shadowScale:1,duration:300,rotate:!0,rotateTouch:!0,rotateXMax:15,rotateYMax:15,rotateXInvert:!1,rotateYInvert:!1,stretchX:0,stretchY:0,stretchZ:0,commonOrigin:!0,shadow:!0,highlight:!0};return function(t){function e(t,e,o,a){t.addEventListener(e,o,a)}function o(t,e,o,a){t.removeEventListener(e,o,a)}function a(t){y=void 0,"pointerdown"===t.type&&"mouse"===t.pointerType||"pointerenter"===t.type&&"mouse"!==t.pointerType||("pointerdown"===t.type&&t.preventDefault(),g=t.clientX,M=t.clientY,T.alwaysActive?f=h=void 0:(F(),"function"==typeof T.onEnter&&T.onEnter()))}function n(t){!1===y&&t.cancelable&&t.preventDefault()}function r(t){if(T.rotate&&_.isActive){if("mouse"!==t.pointerType){if(!T.rotateTouch)return;t.preventDefault()}var e=t.clientX,o=t.clientY,a=e-g,n=o-M;"string"!=typeof T.rotateTouch||0==a&&0==n||void 0!==y||(25<=a*a+n*n&&(n=180*Math.atan2(Math.abs(n),Math.abs(a))/Math.PI,y="scroll-y"===T.rotateTouch?45<n:45<90-n),!1===y&&(b.classList.add("atropos-rotate-touch"),t.cancelable)&&t.preventDefault()),"mouse"!==t.pointerType&&y||j(e,o)}}function i(t){t=t.target,!X.contains(t)&&t!==X&&_.isActive&&C()}var c,s,p,d,u,l,h,f,v,m,y,g,M,x,O,w,b=(Y=t=void 0===t?{}:t).el,X=Y.eventsEl,Y=t.isComponent,_={__atropos__:!0,params:N({},k,{onEnter:null,onLeave:null,onRotate:null},(void 0===(s=t||{})&&(s={}),p={},Object.keys(s).forEach(function(t){void 0!==s[t]&&(p[t]=s[t])}),p)),destroyed:!1,isActive:!1},T=_.params,A=[],L=(function t(){x=requestAnimationFrame(function(){A.forEach(function(t){"function"==typeof t?t():t.element.style[t.prop]=t.value}),A.splice(0,A.length),t()})}(),function(t,e){A.push({element:t,prop:"transitionDuration",value:e})}),E=function(t,e){A.push({element:t,prop:"transitionTimingFunction",value:e})},I=function(t,e){A.push({element:t,prop:"transform",value:e})},R=function(t,e){A.push({element:t,prop:"opacity",value:e})},D=function(t,e){A.push({element:t,prop:"transformOrigin",value:e})},P=function(t){var e=t.rotateXPercentage,n=void 0===e?0:e,e=t.rotateYPercentage,r=void 0===e?0:e,i=t.duration,s=t.opacityOnly,p=t.easeOut;e="[data-atropos-offset], [data-atropos-opacity]",c.querySelectorAll(e).forEach(function(t){L(t,i),E(t,p?"ease-out":"");var e,o,a=(t=>{if(t.dataset.atroposOpacity&&"string"==typeof t.dataset.atroposOpacity)return t.dataset.atroposOpacity.split(";").map(function(t){return parseFloat(t)})})(t);0===n&&0===r?(s||I(t,"translate3d(0, 0, 0)"),a&&R(t,a[0])):(e=parseFloat(t.dataset.atroposOffset)/100,Number.isNaN(e)||s||I(t,"translate3d("+-r*-e+"%, "+n*-e+"%, 0)"),a&&(e=a[0],a=a[1],o=Math.max(Math.abs(n),Math.abs(r)),R(t,e+(a-e)*o/100)))})},j=function(t,e){var o,a=b!==X,n=(h=h||b.getBoundingClientRect(),a&&!f&&(f=X.getBoundingClientRect()),void 0===t&&void 0===e&&(t=(n=a?f:h).left+n.width/2,e=n.top+n.height/2),0),r=0,i=h,s=i.top,p=i.left,c=i.width,i=i.height,u=(a?(u=(l=f).top,r=T.rotateYMax*(t-(o=l.left)-(c/2+(p-o)))/(l.width-c/2)*-1,n=T.rotateXMax*(e-u-(i/2+(s-u)))/(l.height-i/2),o=t-p+"px "+(e-s)+"px"):(r=T.rotateYMax*(t-p-c/2)/(c/2)*-1,n=T.rotateXMax*(e-s-i/2)/(i/2)),n=Math.min(Math.max(-n,-T.rotateXMax),T.rotateXMax),T.rotateXInvert&&(n=-n),r=Math.min(Math.max(-r,-T.rotateYMax),T.rotateYMax),T.rotateYInvert&&(r=-r),n/T.rotateXMax*100),l=r/T.rotateYMax*100,t=(a?l/100*T.stretchX:0)*(T.rotateYInvert?-1:1),p=(a?u/100*T.stretchY:0)*(T.rotateXInvert?-1:1),c=a?Math.max(Math.abs(u),Math.abs(l))/100*T.stretchZ:0;I(d,"translate3d("+t+"%, "+-p+"%, "+-c+"px) rotateX("+n+"deg) rotateY("+r+"deg)"),o&&T.commonOrigin&&D(d,o),m&&(L(m,T.duration+"ms"),E(m,"ease-out"),I(m,"translate3d("+.25*-l+"%, "+.25*u+"%, 0)"),R(m,Math.max(Math.abs(u),Math.abs(l))/100)),P({rotateXPercentage:u,rotateYPercentage:l,duration:T.duration+"ms",easeOut:!0}),"function"==typeof T.onRotate&&T.onRotate(n,r)},F=function(){A.push(function(){return b.classList.add("atropos-active")}),L(d,T.duration+"ms"),E(d,"ease-out"),I(u,"translate3d(0,0, "+T.activeOffset+"px)"),L(u,T.duration+"ms"),E(u,"ease-out"),v&&(L(v,T.duration+"ms"),E(v,"ease-out")),_.isActive=!0},C=function(t){f=h=void 0,!_.isActive||t&&"pointerup"===t.type&&"mouse"===t.pointerType||t&&"pointerleave"===t.type&&"mouse"!==t.pointerType||("string"==typeof T.rotateTouch&&y&&b.classList.remove("atropos-rotate-touch"),T.alwaysActive?j():(A.push(function(){return b.classList.remove("atropos-active")}),L(u,T.duration+"ms"),E(u,""),I(u,"translate3d(0,0, 0px)"),v&&(L(v,T.duration+"ms"),E(v,"")),m&&(L(m,T.duration+"ms"),E(m,""),I(m,"translate3d(0, 0, 0)"),R(m,0)),L(d,T.duration+"ms"),E(d,""),I(d,"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)"),P({duration:T.duration+"ms"}),_.isActive=!1),"function"==typeof T.onRotate&&T.onRotate(0,0),"function"==typeof T.onLeave&&T.onLeave())};return _.destroy=function(){_.destroyed=!0,cancelAnimationFrame(x),o(document,"click",i),o(X,"pointerdown",a),o(X,"pointerenter",a),o(X,"pointermove",r),o(X,"touchmove",n),o(X,"pointerleave",C),o(X,"pointerup",C),o(X,"lostpointercapture",C),delete b.__atropos__},(b="string"==typeof b?S(document,b):b)&&!b.__atropos__&&(void 0!==X?"string"==typeof X&&(X=S(document,X)):X=b,c=Y?b.parentNode.host:b,Object.assign(_,{el:b}),d=S(b,".atropos-rotate"),u=S(b,".atropos-scale"),l=S(b,".atropos-inner"),b.__atropos__=_),b&&X&&(T.shadow&&((v=S(b,".atropos-shadow"))||((v=document.createElement("span")).classList.add("atropos-shadow"),O=!0),I(v,"translate3d(0,0,-"+T.shadowOffset+"px) scale("+T.shadowScale+")"),O)&&d.appendChild(v),T.highlight&&((m=S(b,".atropos-highlight"))||((m=document.createElement("span")).classList.add("atropos-highlight"),w=!0),I(m,"translate3d(0,0,0)"),w)&&l.appendChild(m),T.rotateTouch&&("string"==typeof T.rotateTouch?b.classList.add("atropos-rotate-touch-"+T.rotateTouch):b.classList.add("atropos-rotate-touch")),S(c,"[data-atropos-opacity]")&&P({opacityOnly:!0}),e(document,"click",i),e(X,"pointerdown",a),e(X,"pointerenter",a),e(X,"pointermove",r),e(X,"touchmove",n),e(X,"pointerleave",C),e(X,"pointerup",C),e(X,"lostpointercapture",C),T.alwaysActive)&&(F(),j()),_}})();