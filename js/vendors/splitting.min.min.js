((n,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()})(this,function(){var i=document,a=i.createTextNode.bind(i);function l(n,t,e){n.style.setProperty(t,e)}function f(n,t){return n.appendChild(t)}function d(n,t,e,r){var o=i.createElement("span");return t&&(o.className=t),e&&(r||o.setAttribute("data-"+t,e),o.textContent=e),n&&f(n,o)||o}function p(n,t){return n.getAttribute("data-"+t)}function h(n,t){return n&&0!=n.length?n.nodeName?[n]:[].slice.call(n[0].nodeName?n:(t||i).querySelectorAll(n)):[]}function u(n){for(var t=[];n--;)t[n]=[];return t}function m(n,t){n&&n.some(t)}function o(t){return function(n){return t[n]}}var g={};function n(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function t(n){g[n.by]=n}function v(n,e,r,o,i){n.normalize();var u=[],c=document.createDocumentFragment(),s=(o&&u.push(n.previousSibling),[]);return h(n.childNodes).some(function(n){var t;n.tagName&&!n.hasChildNodes()?s.push(n):n.childNodes&&n.childNodes.length?(s.push(n),u.push.apply(u,v(n,e,r,o,i))):(t=(n=n.wholeText||"").trim()).length&&(" "===n[0]&&s.push(a("      ")),m(t.split(r),function(n,t){t&&i&&s.push(d(c,"whitespace"," ",i)),t=d(c,e,n),u.push(t),s.push(t)})," "===n[n.length-1])&&s.push(a(" "))}),m(s,function(n){f(c,n)}),n.innerHTML="",f(n,c),u}var c="words",e=n(c,0,"word",function(n){return v(n,"word",/\s+/,0,1)}),r="chars",s=n(r,[c],"char",function(n,e,t){var r=[];return m(t[c],function(n,t){r.push.apply(r,v(n,"char","",e.whitespace&&t))}),r});function y(t){var a=(t=t||{}).key;return h(t.target||"[data-splitting]").map(function(u){var n,c,s=u["🍌"];return!t.force&&s||(s=u["🍌"]={el:u},n=(n=t.by||p(u,"splitting"))&&"true"!=n?n:r,n=function t(e,n,r){var o=r.indexOf(e);if(-1==o){r.unshift(e);var i=g[e];if(!i)throw new Error("plugin not loaded: "+e);m(i.depends,function(n){t(n,e,r)})}else i=r.indexOf(n),r.splice(o,1),r.splice(i,0,e);return r}(n,0,[]).map(o(g)),c=((n,t)=>{for(var e in t)n[e]=t[e];return n})({},t),m(n,function(n){var t,e,r,o,i;n.split&&(t=n.by,r=(a?"-"+a:"")+n.key,n=n.split(u,c,s),r&&(e=u,i=(r="--"+r)+"-index",m(o=n,function(n,t){Array.isArray(n)?m(n,function(n){l(n,i,t)}):l(n,i,t)}),l(e,r+"-total",o.length)),s[t]=n,u.classList.add(t))}),u.classList.add("splitting")),s})}function w(n,t,e){var t=h(t.matching||n.children,n),r={};return m(t,function(n){var t=Math.round(n[e]);(r[t]||(r[t]=[])).push(n)}),Object.keys(r).map(Number).sort(b).map(o(r))}function b(n,t){return n-t}y.html=function(n){var t=(n=n||{}).target=d();return t.innerHTML=n.content,y(n),t.outerHTML};var N=n("lines",[c],"line",function(n,t,e){return w(n,{matching:e[c]},"offsetTop")}),x=n("items",0,"item",function(n,t){return h(t.matching||n.children,n)}),T=n("rows",0,"row",function(n,t){return w(n,t,"offsetTop")}),L=n("cols",0,"col",function(n,t){return w(n,t,"offsetLeft")}),k=n("grid",["rows","cols"]),A="layout",C=n(A,0,0,function(n,t){for(var e,r=t.rows=+(t.rows||p(n,"rows")||1),o=t.columns=+(t.columns||p(n,"columns")||1),i=(t.image=t.image||p(n,"image")||n.currentSrc||n.src,t.image&&(e=h("img",n)[0],t.image=e&&(e.currentSrc||e.src)),t.image&&l(n,"background-image","url("+t.image+")"),r*o),u=[],c=d(0,"cell-grid");i--;){var s=d(c,"cell");d(s,"cell-inner"),u.push(s)}return f(n,c),u}),M=n("cellRows",[A],"row",function(n,t,e){var r=t.rows,o=u(r);return m(e[A],function(n,t,e){o[Math.floor(t/(e.length/r))].push(n)}),o}),S=n("cellColumns",[A],"col",function(n,t,e){var r=t.columns,o=u(r);return m(e[A],function(n,t){o[t%r].push(n)}),o}),H=n("cells",["cellRows","cellColumns"],"cell",function(n,t,e){return e[A]});return(y.add=t)(e),t(s),t(N),t(x),t(T),t(L),t(k),t(C),t(M),t(S),t(H),y});