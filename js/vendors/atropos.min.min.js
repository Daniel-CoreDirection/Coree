var Atropos=(()=>{function N(){return(N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o,a=arguments[e];for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t}).apply(this,arguments)}function S(t,e){return t.querySelector(e)}var k={alwaysActive:!1,activeOffset:50,shadowOffset:50,shadowScale:1,duration:300,rotate:!0,rotateTouch:!0,rotateXMax:15,rotateYMax:15,rotateXInvert:!1,rotateYInvert:!1,stretchX:0,stretchY:0,stretchZ:0,commonOrigin:!0,shadow:!0,highlight:!0};return function(t){function e(t,e,o,a){t.addEventListener(e,o,a)}function o(t,e,o,a){t.removeEventListener(e,o,a)}function a(t){M=void 0,"pointerdown"===t.type&&"mouse"===t.pointerType||"pointerenter"===t.type&&"mouse"!==t.pointerType||("pointerdown"===t.type&&t.preventDefault(),x=t.clientX,O=t.clientY,A.alwaysActive?m=v=void 0:(s(),"function"==typeof A.onEnter&&A.onEnter()))}function n(t){!1===M&&t.cancelable&&t.preventDefault()}function r(t){if(A.rotate&&T.isActive){if("mouse"!==t.pointerType){if(!A.rotateTouch)return;t.preventDefault()}var e=t.clientX,o=t.clientY,a=e-x,n=o-O;"string"!=typeof A.rotateTouch||0==a&&0==n||void 0!==M||(25<=a*a+n*n&&(n=180*Math.atan2(Math.abs(n),Math.abs(a))/Math.PI,M="scroll-y"===A.rotateTouch?45<n:45<90-n),!1===M&&(Y.classList.add("atropos-rotate-touch"),t.cancelable)&&t.preventDefault()),"mouse"!==t.pointerType&&M||C(e,o)}}function i(t){t=t.target,!_.contains(t)&&t!==_&&T.isActive&&p()}function s(){L.push(function(){return Y.classList.add("atropos-active")}),E(d,A.duration+"ms"),I(d,"ease-out"),R(h,"translate3d(0,0, "+A.activeOffset+"px)"),E(h,A.duration+"ms"),I(h,"ease-out"),y&&(E(y,A.duration+"ms"),I(y,"ease-out")),T.isActive=!0}function p(t){m=v=void 0,!T.isActive||t&&"pointerup"===t.type&&"mouse"===t.pointerType||t&&"pointerleave"===t.type&&"mouse"!==t.pointerType||("string"==typeof A.rotateTouch&&M&&Y.classList.remove("atropos-rotate-touch"),A.alwaysActive?C():(L.push(function(){return Y.classList.remove("atropos-active")}),E(h,A.duration+"ms"),I(h,""),R(h,"translate3d(0,0, 0px)"),y&&(E(y,A.duration+"ms"),I(y,"")),g&&(E(g,A.duration+"ms"),I(g,""),R(g,"translate3d(0, 0, 0)"),P(g,0)),E(d,A.duration+"ms"),I(d,""),R(d,"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)"),j({duration:A.duration+"ms"}),T.isActive=!1),"function"==typeof A.onRotate&&A.onRotate(0,0),"function"==typeof A.onLeave&&A.onLeave())}var c,u,l,d,h,f,v,m,y,g,M,x,O,w,b,X,Y=(t=void 0===t?{}:t).el,_=t.eventsEl,D=t.isComponent,T={__atropos__:!0,params:N({},k,{onEnter:null,onLeave:null,onRotate:null},(u=t||{},l={},Object.keys(u).forEach(function(t){void 0!==u[t]&&(l[t]=u[t])}),l)),destroyed:!1,isActive:!1},A=T.params,L=[],E=(function t(){w=requestAnimationFrame(function(){L.forEach(function(t){"function"==typeof t?t():t.element.style[t.prop]=t.value}),L.splice(0,L.length),t()})}(),function(t,e){L.push({element:t,prop:"transitionDuration",value:e})}),I=function(t,e){L.push({element:t,prop:"transitionTimingFunction",value:e})},R=function(t,e){L.push({element:t,prop:"transform",value:e})},P=function(t,e){L.push({element:t,prop:"opacity",value:e})},F=function(t,e){L.push({element:t,prop:"transformOrigin",value:e})},j=function(t){var e=t.rotateXPercentage,n=void 0===e?0:e,r=void 0===(e=t.rotateYPercentage)?0:e,i=t.duration,s=t.opacityOnly,p=t.easeOut;c.querySelectorAll("[data-atropos-offset], [data-atropos-opacity]").forEach(function(t){E(t,i),I(t,p?"ease-out":"");var e,o,a=(t=>{if(t.dataset.atroposOpacity&&"string"==typeof t.dataset.atroposOpacity)return t.dataset.atroposOpacity.split(";").map(function(t){return parseFloat(t)})})(t);0===n&&0===r?(s||R(t,"translate3d(0, 0, 0)"),a&&P(t,a[0])):(e=parseFloat(t.dataset.atroposOffset)/100,Number.isNaN(e)||s||R(t,"translate3d("+-r*-e+"%, "+n*-e+"%, 0)"),a&&(e=a[0],a=a[1],o=Math.max(Math.abs(n),Math.abs(r)),P(t,e+(a-e)*o/100)))})},C=function(t,e){var o,a=Y!==_,n=(v=v||Y.getBoundingClientRect(),a&&!m&&(m=_.getBoundingClientRect()),void 0===t&&void 0===e&&(t=(n=a?m:v).left+n.width/2,e=n.top+n.height/2),0),r=0,i=(c=v).top,s=c.left,p=c.width,c=c.height,u=(a?(u=(l=m).top,r=A.rotateYMax*(t-(o=l.left)-(p/2+(s-o)))/(l.width-p/2)*-1,n=A.rotateXMax*(e-u-(c/2+(i-u)))/(l.height-c/2),o=t-s+"px "+(e-i)+"px"):(r=A.rotateYMax*(t-s-p/2)/(p/2)*-1,n=A.rotateXMax*(e-i-c/2)/(c/2)),n=Math.min(Math.max(-n,-A.rotateXMax),A.rotateXMax),A.rotateXInvert&&(n=-n),r=Math.min(Math.max(-r,-A.rotateYMax),A.rotateYMax),A.rotateYInvert&&(r=-r),n/A.rotateXMax*100),l=r/A.rotateYMax*100,t=(a?l/100*A.stretchX:0)*(A.rotateYInvert?-1:1),s=(a?u/100*A.stretchY:0)*(A.rotateXInvert?-1:1),p=a?Math.max(Math.abs(u),Math.abs(l))/100*A.stretchZ:0;R(d,"translate3d("+t+"%, "+-s+"%, "+-p+"px) rotateX("+n+"deg) rotateY("+r+"deg)"),o&&A.commonOrigin&&F(d,o),g&&(E(g,A.duration+"ms"),I(g,"ease-out"),R(g,"translate3d("+.25*-l+"%, "+.25*u+"%, 0)"),P(g,Math.max(Math.abs(u),Math.abs(l))/100)),j({rotateXPercentage:u,rotateYPercentage:l,duration:A.duration+"ms",easeOut:!0}),"function"==typeof A.onRotate&&A.onRotate(n,r)};return T.destroy=function(){T.destroyed=!0,cancelAnimationFrame(w),o(document,"click",i),o(_,"pointerdown",a),o(_,"pointerenter",a),o(_,"pointermove",r),o(_,"touchmove",n),o(_,"pointerleave",p),o(_,"pointerup",p),o(_,"lostpointercapture",p),delete Y.__atropos__},(Y="string"==typeof Y?S(document,Y):Y)&&!Y.__atropos__&&(void 0!==_?"string"==typeof _&&(_=S(document,_)):_=Y,c=D?Y.parentNode.host:Y,Object.assign(T,{el:Y}),d=S(Y,".atropos-rotate"),h=S(Y,".atropos-scale"),f=S(Y,".atropos-inner"),Y.__atropos__=T),Y&&_&&(A.shadow&&((y=S(Y,".atropos-shadow"))||((y=document.createElement("span")).classList.add("atropos-shadow"),b=!0),R(y,"translate3d(0,0,-"+A.shadowOffset+"px) scale("+A.shadowScale+")"),b)&&d.appendChild(y),A.highlight&&((g=S(Y,".atropos-highlight"))||((g=document.createElement("span")).classList.add("atropos-highlight"),X=!0),R(g,"translate3d(0,0,0)"),X)&&f.appendChild(g),A.rotateTouch&&("string"==typeof A.rotateTouch?Y.classList.add("atropos-rotate-touch-"+A.rotateTouch):Y.classList.add("atropos-rotate-touch")),S(c,"[data-atropos-opacity]")&&j({opacityOnly:!0}),e(document,"click",i),e(_,"pointerdown",a),e(_,"pointerenter",a),e(_,"pointermove",r),e(_,"touchmove",n),e(_,"pointerleave",p),e(_,"pointerup",p),e(_,"lostpointercapture",p),A.alwaysActive)&&(s(),C()),T}})();